<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:WorldMap="clr-namespace:RISK.WorldMap">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="Territories/TerritoryStyles.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <DataTemplate DataType="{x:Type WorldMap:WorldMapViewModel}">
        <Grid>
            <Grid.Resources>
                <ItemsPanelTemplate x:Key="TerritoriesPanelTemplate">
                    <Canvas />
                </ItemsPanelTemplate>
            </Grid.Resources>
            
            <WorldMap:WorldMapUserControl Opacity="0.2" />

            <ItemsControl 
                ItemsPanel="{StaticResource TerritoriesPanelTemplate}" 
                ItemsSource="{Binding Territories}" />

        </Grid>
    </DataTemplate>

</ResourceDictionary>